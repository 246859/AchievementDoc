# 自定义成就

倘若需要自定义逻辑时，需要自行监测一些数据的变化，自行做成就的逻辑处理，当全部处理完成时，只需要根据成就类型，选择对应的接口，

提供对应的参数。而这之后的成就处理，展示，数据保存等等工作全部都只需要交给插件核心去完成。



::: tip

需要注意的是，调用接口后，一切的处理都是异步的。很显然的是在LL的RPC中不支持Promise对象，所以一旦调用了这些接口，你也无法获取它的状态，无法获取它的结果。

:::



## 字符串成就接口

```javascript
stringAchievementImpl(pl, type, key)
```

- 返回值：
- 参数：
    - `xuid: string`  - 玩家xuid
    - `type: string` - 成就类型
    - `key: string` - 触发值





## 数字成就接口

```javascript
numberAchievementImpl(pl, type, num, [multipart = false])
```

- 返回值：
- 参数：
    - `xuid: string`  - 玩家xuid
    - `type: string` - 成就类型
    - `num: Integer`  - 变化后的数值
    - `multipart: boolean`  - 多重触发（会将最后一个符合条件包括之前的所有词条全部处理）



## 特殊成就接口

```javascript
specialAchievementImpl(pl, key, [isNum = false, multipart = false])
```

- 返回值：
- 参数：
    - `xuid: string`  - 玩家xuid
    - `type: string` - 成就类型
    - `num: Integer`  - 变化后的数值
    - `isNum: boolean`：- 是否为数字类型成就
    - `multipart: boolean`  - 多重触发（会将最后一个符合条件包括之前的所有词条全部处理）



<br>

**关于多重触发的解释:**

多重触发是数字成就特有的概念，与之相反的是单重触发。

**单重触发**：数字成就在触发时，会按顺序遍历该类型下的所有布尔表达式，遇到第一个满足条件时就会退出循环

**多重触发**：数字成就在触发时，会按顺序遍历该类型下所有的布尔表达式，遇到第一个不满足条件时退出循环。

通俗来讲就是，现在有设置经济奖励 500,2000,4000,10000，传入的触发值是5000，单重触发在遇到500时就会退出循环，将500作为成就词条的key值返回给事件调度器。而多重触发，会将500，2000，4000，会返回一个[500,2000,4000]数组给事件调度器。那么最后的效果就是，单重触发明明是5000的经济但是给我显示了500的成就，多重触发则会依次显示500，2000，4000的成就。这种情况下明显多重触发会更好，不过单重触发也有其适用的情况。

